# MariaDB Galera Cluster Environment Variables
# Copy this file to .env and modify the values according to your setup

# Galera Cluster Configuration
CLUSTER_NAME=__CLUSTER_NAME_PLACEHOLDER__

# Database Configuration
MYSQL_ROOT_PASSWORD=__MYSQL_ROOT_PASSWORD_PLACEHOLDER__
MYSQL_DATABASE=__MYSQL_DATABASE_PLACEHOLDER__
MYSQL_USER=__MYSQL_USER_PLACEHOLDER__
MYSQL_PASSWORD=__MYSQL_PASSWORD_PLACEHOLDER__

# Timezone Configuration
TZ=UTC

# Host IP Addresses - Replace with your actual server IPs
HOST1_IP=__HOST1_IP_PLACEHOLDER__
HOST2_IP=__HOST2_IP_PLACEHOLDER__

# SST (State Snapshot Transfer) Configuration
SST_USER=sst_user
SST_PASSWORD=__SST_PASSWORD_PLACEHOLDER__

# Monitoring Configuration
MONITOR_USER=monitor
MONITOR_PASSWORD=__MONITOR_PASSWORD_PLACEHOLDER__

# Replication Configuration
REPL_USER=repl_user
REPL_PASSWORD=__REPL_PASSWORD_PLACEHOLDER__

# Network Configuration (for custom Docker networks - optional)
GALERA_SUBNET=172.20.0.0/16
GALERA_GATEWAY=172.20.0.1
NODE1_IP=172.20.0.10
NODE2_IP=172.20.0.11

# Bootstrap Configuration
# IMPORTANT: Set to 'yes' ONLY for initial deployment or disaster recovery
# After cluster is running, MUST be removed or set to empty to prevent split-brain
#
# For initial deployment:
#   1. Set BOOTSTRAP_NODE1=yes on Host 1
#   2. Leave BOOTSTRAP_NODE2 unset (or empty) on Host 2
#   3. Start Host 1, wait for it to initialize
#   4. Start Host 2 (will join cluster)
#   5. CRITICAL: Remove BOOTSTRAP_NODE1 or set to empty (in Portainer or .env)
#
# For disaster recovery (both nodes down):
#   1. Determine which node has most recent data
#   2. Set that node's BOOTSTRAP to 'yes'
#   3. Start that node first
#   4. Start other node (will sync from bootstrap node)
#   5. CRITICAL: Remove BOOTSTRAP or set to empty
#
# Normal operation: Both should be unset, empty, or any value other than 'yes'
BOOTSTRAP_NODE1=
BOOTSTRAP_NODE2=
